# ğŸ“– å¼€å‘è§„èŒƒ

ä»£ç é£æ ¼ã€å‘½åçº¦å®šå’Œæœ€ä½³å®è·µæŒ‡å—ã€‚

## ğŸ¨ ä»£ç é£æ ¼

### TypeScript é…ç½®

é¡¹ç›®ä½¿ç”¨ **TypeScript Strict æ¨¡å¼**ï¼š

```json
{
  "strict": true,
  "noImplicitAny": true,
  "strictNullChecks": true,
  "noUncheckedIndexedAccess": true,
  "noUnusedLocals": true,
  "noUnusedParameters": true
}
```

### ESLint é…ç½®

```bash
# æ£€æŸ¥ä»£ç 
npm run lint

# è‡ªåŠ¨ä¿®å¤
npm run lint --fix
```

### Prettier é…ç½®

```bash
# æ ¼å¼åŒ–ä»£ç 
npm run format
```

é…ç½®ï¼ˆ`.prettierrc`ï¼‰ï¼š

```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2
}
```

## ğŸ“ å‘½åè§„èŒƒ

### æ–‡ä»¶å‘½å

```
âœ… ç»„ä»¶: PascalCase
   AttackDemo.tsx
   DefensePanel.tsx

âœ… Hook: useCamelCase
   useAttackTest.ts
   useDefenseConfig.ts

âœ… å·¥å…·: camelCase
   validators.ts
   formatters.ts

âœ… ç±»å‹: camelCase æˆ– .d.ts
   index.ts
   next-auth.d.ts

âœ… é¡µé¢: kebab-case
   app/login/page.tsx
   app/dashboard/page.tsx
```

### å˜é‡å‘½å

```typescript
// âœ… å¸¸é‡: UPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;
const API_BASE_URL = 'http://localhost:3000';

// âœ… æ™®é€šå˜é‡: camelCase
const userInput = 'test';
const defenseLevel = 'high';

// âœ… ç±»å: PascalCase
class DefenseSystem {}
class InputValidator {}

// âœ… ç§æœ‰å±æ€§: å‰ç¼€ _
class MyClass {
  private _privateProperty = 'private';
  public publicProperty = 'public';
}

// âœ… å¸ƒå°”å€¼: is/has/should å‰ç¼€
const isLoading = false;
const hasError = true;
const shouldValidate = true;
```

### å‡½æ•°å‘½å

```typescript
// âœ… åŠ¨è¯å¼€å¤´
function fetchUserData() {}
function validateInput() {}
function handleSubmit() {}

// âœ… å¸ƒå°”è¿”å›å€¼: is/has/can
function isValidEmail() {}
function hasPermission() {}
function canDelete() {}

// âœ… äº‹ä»¶å¤„ç†: handle å‰ç¼€
function handleClick() {}
function handleInputChange() {}
```

## ğŸ—ï¸ ç»„ä»¶è§„èŒƒ

### React ç»„ä»¶ç»“æ„

```tsx
'use client'; // å¦‚æœæ˜¯å®¢æˆ·ç«¯ç»„ä»¶

import { useState, useEffect } from 'react';

import { Button } from '@/components/ui/button';
import { useAttackTest } from '@/hooks/useAttackTest';
import { cn } from '@/utils/cn';
import type { AttackTestInput } from '@/types';

/**
 * ç»„ä»¶æè¿°
 *
 * @param props - ç»„ä»¶å±æ€§
 * @returns JSX å…ƒç´ 
 */
interface MyComponentProps {
  title: string;
  onSubmit: (data: AttackTestInput) => void;
  className?: string;
}

export function MyComponent({ title, onSubmit, className }: MyComponentProps) {
  // 1. Hook è°ƒç”¨ï¼ˆæŒ‰å­—æ¯é¡ºåºï¼‰
  const [state, setState] = useState<string>('');
  const { runTest } = useAttackTest();

  // 2. å‰¯ä½œç”¨
  useEffect(() => {
    // å‰¯ä½œç”¨é€»è¾‘
  }, [dependencies]);

  // 3. äº‹ä»¶å¤„ç†å‡½æ•°
  const handleClick = () => {
    // å¤„ç†é€»è¾‘
  };

  // 4. è®¡ç®—å€¼
  const displayValue = state.toUpperCase();

  // 5. æå‰è¿”å›ï¼ˆå¦‚æœ‰ï¼‰
  if (!title) {
    return null;
  }

  // 6. æ¸²æŸ“
  return (
    <div className={cn('my-component', className)}>
      <h2>{title}</h2>
      <Button onClick={handleClick}>{displayValue}</Button>
    </div>
  );
}
```

### ç»„ä»¶å¯¼å‡º

```typescript
// âœ… æ¨è: å‘½åå¯¼å‡º
export function MyComponent() {}

// âŒ é¿å…: é»˜è®¤å¯¼å‡ºï¼ˆåœ¨ç»„ä»¶ä¸­ï¼‰
export default MyComponent;

// âœ… é¡µé¢ç»„ä»¶ä¾‹å¤–ï¼ˆNext.js è¦æ±‚ï¼‰
// app/page.tsx
export default function HomePage() {}
```

## ğŸ“¦ å¯¼å…¥è§„èŒƒ

### å¯¼å…¥é¡ºåº

ä½¿ç”¨ ESLint è‡ªåŠ¨æ’åºï¼š

```typescript
// 1. React/Next.js
import { useState } from 'react';
import { useRouter } from 'next/navigation';

// 2. ç¬¬ä¸‰æ–¹åº“
import { z } from 'zod';

// 3. å†…éƒ¨åˆ«åå¯¼å…¥
import { Button } from '@/components/ui/button';
import { useAttackTest } from '@/hooks/useAttackTest';
import { prisma } from '@/lib/db';

// 4. ç›¸å¯¹å¯¼å…¥
import { helper } from './helper';

// 5. ç±»å‹å¯¼å…¥
import type { User } from '@/types';
```

### ç±»å‹å¯¼å…¥

```typescript
// âœ… æ¨è: ä½¿ç”¨ type å…³é”®å­—
import type { User, ApiResponse } from '@/types';

// âœ… æ··åˆå¯¼å…¥
import { useState, type FC } from 'react';
```

## ğŸ”¤ æ³¨é‡Šè§„èŒƒ

### JSDoc æ³¨é‡Š

````typescript
/**
 * å‡½æ•°åŠŸèƒ½æè¿°
 *
 * @param input - è¾“å…¥å‚æ•°è¯´æ˜
 * @param options - é€‰é¡¹å¯¹è±¡
 * @param options.level - é˜²å¾¡ç­‰çº§
 * @returns è¿”å›å€¼è¯´æ˜
 *
 * @example
 * ```ts
 * const result = await validateInput('test', { level: 'high' });
 * ```
 */
async function validateInput(
  input: string,
  options: { level: DefenseLevel }
): Promise<ValidationResult> {
  // å®ç°
}
````

### ä»£ç æ³¨é‡Š

```typescript
// âœ… è§£é‡Š"ä¸ºä»€ä¹ˆ"ï¼Œä¸æ˜¯"æ˜¯ä»€ä¹ˆ"
// ä½¿ç”¨ bcrypt è€Œé scryptï¼Œå› ä¸ºæ›´å¥½çš„è·¨å¹³å°æ”¯æŒ
const hash = await bcrypt.hash(password, 12);

// âŒ é¿å…æ˜¾è€Œæ˜“è§çš„æ³¨é‡Š
// è®¾ç½® loading ä¸º true
setLoading(true);
```

### TODO æ³¨é‡Š

```typescript
// TODO: å®ç°å®é™…çš„ LLM API è°ƒç”¨
// TODO(username): æ·»åŠ é”™è¯¯é‡è¯•é€»è¾‘
// FIXME: ä¿®å¤åœ¨ Safari ä¸­çš„å¸ƒå±€é—®é¢˜
// HACK: ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼Œç­‰å¾…ä¸Šæ¸¸ä¿®å¤
```

## ğŸ¯ ç±»å‹å®‰å…¨

### é¿å… any

```typescript
// âŒ é¿å…
function process(data: any) {}

// âœ… ä½¿ç”¨ unknown
function process(data: unknown) {
  if (typeof data === 'string') {
    // ç±»å‹æ”¶çª„
  }
}

// âœ… ä½¿ç”¨æ³›å‹
function process<T extends BaseType>(data: T): T {
  return data;
}
```

### ä½¿ç”¨ Zod éªŒè¯

```typescript
import { z } from 'zod';

// å®šä¹‰ schema
const userSchema = z.object({
  email: z.string().email(),
  age: z.number().min(0).max(120),
});

// æ¨æ–­ç±»å‹
type User = z.infer<typeof userSchema>;

// éªŒè¯
function createUser(data: unknown): User {
  return userSchema.parse(data);
}
```

### ç±»å‹å®ˆå«

```typescript
// ç±»å‹å®ˆå«å‡½æ•°
function isUser(value: unknown): value is User {
  return (
    typeof value === 'object' &&
    value !== null &&
    'id' in value &&
    'email' in value
  );
}

// ä½¿ç”¨
if (isUser(data)) {
  // data ç°åœ¨æ˜¯ User ç±»å‹
  console.log(data.email);
}
```

## ğŸ”§ Hook è§„èŒƒ

```typescript
/**
 * è‡ªå®šä¹‰ Hook
 */
export function useMyFeature(initialValue: string) {
  const [value, setValue] = useState(initialValue);
  const [loading, setLoading] = useState(false);

  const doSomething = useCallback(async () => {
    setLoading(true);
    try {
      // å¼‚æ­¥æ“ä½œ
    } finally {
      setLoading(false);
    }
  }, [dependencies]);

  return {
    value,
    loading,
    doSomething,
  };
}
```

## ğŸ“‹ é”™è¯¯å¤„ç†

### è‡ªå®šä¹‰é”™è¯¯

```typescript
// ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯ç±»
throw new ValidationError('Invalid input');
throw new AuthenticationError('Not authenticated');

// API è·¯ç”±ä¸­
try {
  // ä¸šåŠ¡é€»è¾‘
} catch (error) {
  const { message, statusCode, code } = handleError(error);
  return NextResponse.json(
    { success: false, error: { code, message } },
    { status: statusCode }
  );
}
```

### å¼‚æ­¥é”™è¯¯

```typescript
// âœ… ä½¿ç”¨ try-catch
async function fetchData() {
  try {
    const response = await fetch(url);
    return await response.json();
  } catch (error) {
    console.error('Fetch failed:', error);
    throw new AppError('Failed to fetch data');
  }
}

// âœ… Promise é”™è¯¯å¤„ç†
promise.then(handleSuccess).catch(handleError).finally(cleanup);
```

## ğŸ¨ Tailwind è§„èŒƒ

### ç±»åé¡ºåº

```tsx
// âœ… æ¨èé¡ºåº: å¸ƒå±€ â†’ é—´è· â†’ æ’ç‰ˆ â†’ è§†è§‰ â†’ å…¶ä»–
<div
  className={cn(
    // å¸ƒå±€
    'flex items-center justify-between',
    // é—´è·
    'gap-2 px-4 py-2',
    // æ’ç‰ˆ
    'text-sm font-medium',
    // è§†è§‰
    'bg-primary rounded-lg text-white',
    // çŠ¶æ€
    'hover:bg-primary/90 focus:ring-2',
    // å“åº”å¼
    'md:px-6 lg:px-8',
    // è‡ªå®šä¹‰
    className
  )}
>
  {children}
</div>
```

### ä½¿ç”¨ cn å·¥å…·

```tsx
import { cn } from '@/utils/cn';

// âœ… æ¡ä»¶ç±»å
<div
  className={cn(
    'base-classes',
    isActive && 'active-classes',
    isDisabled && 'disabled-classes',
    className
  )}
/>;
```

## ğŸ§ª æµ‹è¯•è§„èŒƒï¼ˆæœªæ¥ï¼‰

```typescript
import { render, screen } from '@testing-library/react';

describe('MyComponent', () => {
  it('should render correctly', () => {
    render(<MyComponent title="Test" />);
    expect(screen.getByText('Test')).toBeInTheDocument();
  });

  it('should handle click events', async () => {
    const onSubmit = jest.fn();
    render(<MyComponent onSubmit={onSubmit} />);

    await userEvent.click(screen.getByRole('button'));
    expect(onSubmit).toHaveBeenCalled();
  });
});
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### React ä¼˜åŒ–

```tsx
// âœ… ä½¿ç”¨ memo
export const MyComponent = memo(function MyComponent(props) {
  // ...
});

// âœ… ä½¿ç”¨ useCallback
const handleClick = useCallback(() => {
  // ...
}, [dependencies]);

// âœ… ä½¿ç”¨ useMemo
const expensiveValue = useMemo(() => {
  return computeExpensiveValue(data);
}, [data]);
```

### ä»£ç åˆ†å‰²

```tsx
// âœ… åŠ¨æ€å¯¼å…¥
import dynamic from 'next/dynamic';

const HeavyComponent = dynamic(() => import('./HeavyComponent'), {
  loading: () => <p>Loading...</p>,
});
```

## ğŸ”’ å®‰å…¨è§„èŒƒ

```typescript
// âœ… éªŒè¯æ‰€æœ‰ç”¨æˆ·è¾“å…¥
const validation = schema.safeParse(input);
if (!validation.success) {
  throw new ValidationError(validation.error.message);
}

// âœ… ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼ˆPrisma è‡ªåŠ¨å¤„ç†ï¼‰
const user = await prisma.user.findUnique({
  where: { email },
});

// âŒ ç»ä¸ç›´æ¥æ‹¼æ¥ SQL
// const query = `SELECT * FROM users WHERE email = '${email}'`;

// âœ… æ¸…ç†è¾“å‡º
const safeHtml = DOMPurify.sanitize(html);
```

## ğŸ“ Git æäº¤è§„èŒƒ

```bash
# æäº¤æ ¼å¼
<type>(<scope>): <subject>

# ç±»å‹
feat:     æ–°åŠŸèƒ½
fix:      ä¿®å¤
docs:     æ–‡æ¡£
style:    æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œï¼‰
refactor: é‡æ„
test:     æµ‹è¯•
chore:    æ„å»º/å·¥å…·

# ç¤ºä¾‹
feat(auth): æ·»åŠ  GitHub OAuth ç™»å½•
fix(api): ä¿®å¤æ”»å‡»æµ‹è¯•è¶…æ—¶é—®é¢˜
docs(readme): æ›´æ–°å®‰è£…è¯´æ˜
```

## âœ… ä»£ç å®¡æŸ¥æ¸…å•

- [ ] ä»£ç ç¬¦åˆ TypeScript strict æ¨¡å¼
- [ ] æ‰€æœ‰å‡½æ•°éƒ½æœ‰ç±»å‹æ³¨è§£
- [ ] ä½¿ç”¨ Zod éªŒè¯ç”¨æˆ·è¾“å…¥
- [ ] é”™è¯¯å¤„ç†å®Œæ•´
- [ ] ç»„ä»¶æœ‰é€‚å½“çš„æ³¨é‡Š
- [ ] æ²¡æœ‰ console.logï¼ˆé™¤è°ƒè¯•å¤–ï¼‰
- [ ] éµå¾ªå‘½åè§„èŒƒ
- [ ] ä»£ç æ ¼å¼åŒ–ï¼ˆPrettierï¼‰
- [ ] é€šè¿‡ ESLint æ£€æŸ¥
- [ ] æ²¡æœ‰æœªä½¿ç”¨çš„å¯¼å…¥

---

**æœ€åæ›´æ–°**: 2025-01-15
**ç»´æŠ¤è€…**: é¡¹ç›®å›¢é˜Ÿ
